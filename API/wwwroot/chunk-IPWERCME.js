import{a as T,b as Q}from"./chunk-Q6KTHPAM.js";import{a as y}from"./chunk-V7KVYTGM.js";import{b as L}from"./chunk-QEUZQUCF.js";import{B as N,D as c,F as z,G as f,H as _,K as E,M as H,N as I,O as R,Q as w,S as g,U as M,V as K,Y as D}from"./chunk-JE7HT4M6.js";import{$a as x,Cb as q,Db as P,Ja as v,Ka as C,La as j,Na as k,Oa as O,Pa as p,Qa as r,Ra as i,Sa as s,U as l,_b as J,bb as b,gc as $,gd as F,ic as h,na as n,pb as m,qb as S,ra as U,rb as d,va as u,wb as V}from"./chunk-AKPHXCJB.js";var B=class t{fb=l(w);accountService=l(L);router=l(h);activatedRoute=l($);returnUrl="/shop";constructor(){let o=this.activatedRoute.snapshot.queryParams.returnUrl;o&&(this.returnUrl=o)}loginForm=this.fb.group({email:[""],password:[""]});onSubmit(){this.accountService.login(this.loginForm.value).subscribe({next:()=>{this.accountService.getUserInfo().subscribe(),this.router.navigateByUrl(this.returnUrl)}})}static \u0275fac=function(e){return new(e||t)};static \u0275cmp=u({type:t,selectors:[["app-login"]],decls:15,vars:1,consts:[[1,"max-w-lg","mx-auto","mt-32","p-8","bg-white"],[3,"ngSubmit","formGroup"],[1,"text-center","mb-6"],[1,"text-3xl","font-semibold","text-primary"],["appearance","outline",1,"w-full","mb-4"],["formControlName","email","type","email","placeholder","name@sample.com","matInput",""],["formControlName","password","type","password","placeholder","Enter your password","matInput",""],["mat-flat-button","","type","submit",1,"w-full","py-2"]],template:function(e,a){e&1&&(r(0,"mat-card",0)(1,"form",1),x("ngSubmit",function(){return a.onSubmit()}),r(2,"div",2)(3,"h1",3),m(4,"Login"),i()(),r(5,"mat-form-field",4)(6,"mat-label"),m(7,"Email"),i(),s(8,"input",5),i(),r(9,"mat-form-field",4)(10,"mat-label"),m(11,"Password"),i(),s(12,"input",6),i(),r(13,"button",7),m(14,"Login"),i()()()),e&2&&(n(),p("formGroup",a.loginForm))},dependencies:[g,E,N,f,_,I,R,y,D,T,F,M],encapsulation:2})};function ee(t,o){if(t&1&&(r(0,"mat-error"),m(1),i()),t&2){let e=b();n(),d(" ",e.label," is required ")}}function te(t,o){if(t&1&&(r(0,"mat-error"),m(1),i()),t&2){let e=b();n(),d(" ",e.label," is not a valid email ")}}var A=class t{constructor(o){this.controlDir=o;this.controlDir.valueAccessor=this}label="";type="text";writeValue(o){}registerOnChange(o){}registerOnTouched(o){}get control(){return this.controlDir.control}static \u0275fac=function(e){return new(e||t)(U(z,2))};static \u0275cmp=u({type:t,selectors:[["app-text-input"]],inputs:{label:"label",type:"type"},decls:6,vars:8,consts:[["appearance","outline",1,"w-full","mb-4"],["matInput","",3,"formControl","type","placeholder"]],template:function(e,a){e&1&&(r(0,"mat-form-field",0)(1,"mat-label"),m(2),i(),s(3,"input",1),v(4,ee,2,1,"mat-error"),v(5,te,2,1,"mat-error"),i()),e&2&&(n(2),S(a.label),n(),p("type",V(a.type))("placeholder",V(a.label))("formControl",a.control),n(),C(a.control.hasError("required")?4:-1),n(),C(a.control.hasError("email")?5:-1))},dependencies:[g,N,f,H,D,T,K,M],encapsulation:2})};function oe(t,o){if(t&1&&(r(0,"li"),m(1),i()),t&2){let e=o.$implicit;n(),S(e)}}function ie(t,o){if(t&1&&(r(0,"div",8)(1,"ul",10),k(2,oe,2,1,"li",null,j),i()()),t&2){let e=b();n(2),O(e.validationErrors)}}var G=class t{fb=l(w);accountService=l(L);router=l(h);snack=l(Q);validationErrors;registerForm=this.fb.group({firstName:["",c.required],lastName:["",c.required],email:["",[c.required,c.email]],password:["",[c.required,c.minLength(6)]]});onSubmit(){this.accountService.register(this.registerForm.value).subscribe({next:()=>{this.snack.success("Registration successful"),this.router.navigateByUrl("/account/login")},error:o=>{this.validationErrors=o}})}static \u0275fac=function(e){return new(e||t)};static \u0275cmp=u({type:t,selectors:[["app-register"]],decls:19,vars:9,consts:[[1,"max-w-lg","mx-auto","mt-32","p-8","bg-white"],[3,"ngSubmit","formGroup"],[1,"text-center","mb-6"],[1,"text-3xl","font-semibold","text-primary"],["formControlName","firstName","label","First Name"],["formControlName","lastName","label","Last Name"],["formControlName","email","label","Email"],["formControlName","password","label","Password"],[1,"mb-3","p-4","bg-red-100","text-red-600"],["mat-flat-button","","type","submit",1,"w-full","py-2",3,"disabled"],[1,"list-disc","px-3"]],template:function(e,a){e&1&&(r(0,"mat-card",0)(1,"form",1),x("ngSubmit",function(){return a.onSubmit()}),r(2,"div",2)(3,"h1",3),m(4,"Register"),i()(),s(5,"app-text-input",4)(6,"app-text-input",5)(7,"app-text-input",6)(8,"app-text-input",7),v(9,ie,4,0,"div",8),r(10,"button",9),m(11,"Register"),i()()(),r(12,"mat-card")(13,"pre"),m(14),q(15,"json"),i(),r(16,"pre"),m(17),q(18,"json"),i()()),e&2&&(n(),p("formGroup",a.registerForm),n(8),C(a.validationErrors?9:-1),n(),p("disabled",a.registerForm.invalid),n(4),d("Form values: ",P(15,5,a.registerForm.value)),n(3),d("Form status: ",P(18,7,a.registerForm.status)))},dependencies:[g,E,f,_,I,R,y,F,A,J],encapsulation:2})};var Be=[{path:"login",component:B},{path:"register",component:G}];export{Be as accountRoutes};
